<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="shop.mtcoding.project.model.ResumeRepository">
    <select id="findAll" resultType="shop.mtcoding.project.model.Resume">
        select * from resume_tb
    </select>

    <select id="findById" resultType="shop.mtcoding.project.model.User">

    </select>

   <insert id="insertTemp" userGeneratedKeys="true"  keyProperty="rDto.resumeId">
    INSERT INTO RESUME_TB(rt.user_id, rt.title, rt.content, rt.education, rt.career, rt.link, rt.state, rt.created_at, ust.skill_name1, ust.skill_name2, ust.skill_name3)
        values(#{userId}, #{title}, #{content}, #{education},#{career},#{link},#{state}, now(),#{skill_name1},#{skill_name2},#{skill_name3})
    FROM RESUME_TB RT LEFT JOIN USER_SKILL_TB UST 
    ON RT.USER_ID = UST.USER_ID
    </insert>  

   <insert id="insert">
    INSERT INTO RESUME_TB(rt.user_id, rt.title, rt.content, rt.education, rt.career, rt.link, rt.state, rt.created_at, ust.skill_name1, ust.skill_name2, ust.skill_name3)
        values(#{userId}, #{title}, #{content}, #{education},#{career},#{link},#{state}, now(),#{skill_name1},#{skill_name2},#{skill_name3})
    FROM RESUME_TB RT LEFT JOIN USER_SKILL_TB UST 
    ON RT.USER_ID = UST.USER_ID
    </insert>    

    <update id="updateById">

    </update>

    <delete id="deleteById">

    </delete>
</mapper>